<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸµ ë‚˜ë§Œì˜ ìŒì•… DNA - ìŒì•…ì·¨í–¥ ì„¤ë¬¸</title>
    <link href="./output.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-pink-800 min-h-screen font-['Inter']">
    <!-- ë°°ê²½ ìŒì•… íŒŒë™ ì• ë‹ˆë©”ì´ì…˜ -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute inset-0 bg-gradient-to-r from-purple-500/20 via-blue-500/20 to-pink-500/20 animate-pulse"></div>
        <div class="absolute top-1/4 left-1/4 w-32 h-32 bg-purple-400/30 rounded-full animate-bounce"></div>
        <div class="absolute top-3/4 right-1/4 w-24 h-24 bg-blue-400/30 rounded-full animate-bounce" style="animation-delay: 1s;"></div>
        <div class="absolute top-1/2 left-1/2 w-16 h-16 bg-pink-400/30 rounded-full animate-bounce" style="animation-delay: 2s;"></div>
    </div>

    <div class="relative z-10 container mx-auto px-4 py-8">
        <!-- í—¤ë” -->
        <header class="text-center mb-12">
            <div class="inline-block p-4 bg-white/10 backdrop-blur-md rounded-full mb-6">
                <span class="text-6xl">ğŸµ</span>
            </div>
            <h1 class="text-5xl md:text-6xl font-bold text-white mb-4 bg-gradient-to-r from-purple-300 via-pink-300 to-blue-300 bg-clip-text text-transparent">
                ë‚˜ë§Œì˜ ìŒì•… DNA
            </h1>
            <p class="text-xl text-purple-200 max-w-2xl mx-auto">
                ë‹¹ì‹ ì˜ ìŒì•… ì·¨í–¥ì„ ë¶„ì„í•˜ì—¬ ê³ ìœ í•œ ìŒì•… í”„ë¡œí•„ì„ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤
            </p>
        </header>

        <!-- ì„¤ë¬¸ í¼ -->
        <div class="max-w-4xl mx-auto">
            <form id="musicSurveyForm" class="space-y-8">
                <!-- 1. ê¸°ë³¸ ìŒì•… ì •ë³´ -->
                <div class="bg-white/10 backdrop-blur-md rounded-2xl p-8 border border-white/20">
                    <h2 class="text-3xl font-bold text-white mb-6 flex items-center">
                        <span class="text-4xl mr-3">ğŸ¼</span>
                        ê¸°ë³¸ ìŒì•… ì •ë³´
                    </h2>
                    
                    <!-- ìŒì•… ì¥ë¥´ -->
                    <div class="mb-6">
                        <label class="block text-lg font-semibold text-purple-200 mb-4">ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ìŒì•… ì¥ë¥´ (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="genres" value="K-POP" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">K-POP</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="genres" value="íŒ" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">íŒ</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="genres" value="í™í•©" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">í™í•©</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="genres" value="R&B" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">R&B</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="genres" value="ë¡" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ë¡</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="genres" value="ì¬ì¦ˆ" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ì¬ì¦ˆ</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="genres" value="í´ë˜ì‹" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">í´ë˜ì‹</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="genres" value="ì¼ë ‰íŠ¸ë¡œë‹‰" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ì¼ë ‰íŠ¸ë¡œë‹‰</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="genres" value="ì¸ë””" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ì¸ë””</span>
                            </label>
                        </div>
                    </div>

                    <!-- ì²­ì·¨ ì‹œê°„ -->
                    <div class="mb-6">
                        <label class="block text-lg font-semibold text-purple-200 mb-4">í•˜ë£¨ì— ìŒì•…ì„ ë“£ëŠ” ì‹œê°„</label>
                        <select name="listeningTime" class="w-full p-3 bg-white/20 border border-white/30 rounded-lg text-white focus:ring-2 focus:ring-purple-400 focus:border-transparent">
                            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                            <option value="30ë¶„ ì´í•˜">30ë¶„ ì´í•˜</option>
                            <option value="30ë¶„-1ì‹œê°„">30ë¶„-1ì‹œê°„</option>
                            <option value="1-2ì‹œê°„">1-2ì‹œê°„</option>
                            <option value="2-4ì‹œê°„">2-4ì‹œê°„</option>
                            <option value="4ì‹œê°„ ì´ìƒ">4ì‹œê°„ ì´ìƒ</option>
                        </select>
                    </div>

                    <!-- ì²­ì·¨ ìƒí™© -->
                    <div class="mb-6">
                        <label class="block text-lg font-semibold text-purple-200 mb-4">ìŒì•…ì„ ì£¼ë¡œ ë“£ëŠ” ìƒí™© (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="situations" value="ìš´ë™" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸƒâ€â™‚ï¸ ìš´ë™</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="situations" value="ê³µë¶€" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ“š ê³µë¶€</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="situations" value="í‡´ê·¼ê¸¸" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸš‡ í‡´ê·¼ê¸¸</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="situations" value="ì§‘ì•ˆì¼" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ§¹ ì§‘ì•ˆì¼</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="situations" value="ë“œë¼ì´ë¸Œ" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸš— ë“œë¼ì´ë¸Œ</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="situations" value="ìƒ¤ì›Œ" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸš¿ ìƒ¤ì›Œ</span>
                            </label>
                        </div>
                    </div>

                    <!-- ì„ í˜¸ ì‹œëŒ€ -->
                    <div class="mb-6">
                        <label class="block text-lg font-semibold text-purple-200 mb-4">ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì‹œëŒ€ì˜ ìŒì•…</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="era" value="80s" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ¸ 80s</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="era" value="90s" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ¤ 90s</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="era" value="2000s" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ’¿ 2000s</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="era" value="2010s" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ“± 2010s</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="era" value="í˜„ì¬" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ”¥ í˜„ì¬</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 2. ê°ì • & ë¶„ìœ„ê¸° -->
                <div class="bg-white/10 backdrop-blur-md rounded-2xl p-8 border border-white/20">
                    <h2 class="text-3xl font-bold text-white mb-6 flex items-center">
                        <span class="text-4xl mr-3">ğŸ’«</span>
                        ê°ì • & ë¶„ìœ„ê¸°
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-lg font-semibold text-purple-200 mb-4">ê¸°ë¶„ì´ ì¢‹ì„ ë•Œ ë“£ëŠ” ìŒì•…</label>
                            <input type="text" name="happyMusic" placeholder="ì˜ˆ: ë°ê³  ê²½ì¾Œí•œ íŒì†¡" class="w-full p-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-400 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-lg font-semibold text-purple-200 mb-4">ìš°ìš¸í•  ë•Œ ë“£ëŠ” ìŒì•…</label>
                            <input type="text" name="sadMusic" placeholder="ì˜ˆ: ì”ì”í•œ ë°œë¼ë“œ" class="w-full p-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-400 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-lg font-semibold text-purple-200 mb-4">ì§‘ì¤‘í•  ë•Œ ë“£ëŠ” ìŒì•…</label>
                            <input type="text" name="focusMusic" placeholder="ì˜ˆ: í´ë˜ì‹, ì¬ì¦ˆ" class="w-full p-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-400 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-lg font-semibold text-purple-200 mb-4">ì ë“¤ê¸° ì „ì— ë“£ëŠ” ìŒì•…</label>
                            <input type="text" name="sleepMusic" placeholder="ì˜ˆ: ASMR, ìì—°ìŒ" class="w-full p-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-400 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-lg font-semibold text-purple-200 mb-4">ìš´ë™í•  ë•Œ ë“£ëŠ” ìŒì•…</label>
                            <input type="text" name="workoutMusic" placeholder="ì˜ˆ: ê°•ë ¬í•œ EDM" class="w-full p-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-purple-300 focus:ring-2 focus:ring-purple-400 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- 3. ìŒì•…ì  ìš”ì†Œ -->
                <div class="bg-white/10 backdrop-blur-md rounded-2xl p-8 border border-white/20">
                    <h2 class="text-3xl font-bold text-white mb-6 flex items-center">
                        <span class="text-4xl mr-3">ğŸ¹</span>
                        ìŒì•…ì  ìš”ì†Œ
                    </h2>
                    
                    <!-- ì¤‘ìš” ìš”ì†Œ -->
                    <div class="mb-6">
                        <label class="block text-lg font-semibold text-purple-200 mb-4">ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ìš”ì†Œ</label>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="importantElement" value="ë©œë¡œë””" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸµ ë©œë¡œë””</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="importantElement" value="ê°€ì‚¬" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ“ ê°€ì‚¬</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="importantElement" value="ë¹„íŠ¸" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ¥ ë¹„íŠ¸</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="importantElement" value="ë³´ì»¬" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ¤ ë³´ì»¬</span>
                            </label>
                        </div>
                    </div>

                    <!-- ì„ í˜¸ ì•…ê¸° -->
                    <div class="mb-6">
                        <label class="block text-lg font-semibold text-purple-200 mb-4">ì¢‹ì•„í•˜ëŠ” ì•…ê¸°</label>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="instruments" value="í”¼ì•„ë…¸" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ¹ í”¼ì•„ë…¸</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="instruments" value="ê¸°íƒ€" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ¸ ê¸°íƒ€</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="instruments" value="ë“œëŸ¼" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ¥ ë“œëŸ¼</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="instruments" value="ë°”ì´ì˜¬ë¦°" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ» ë°”ì´ì˜¬ë¦°</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="instruments" value="ìƒ‰ì†Œí°" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ· ìƒ‰ì†Œí°</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="instruments" value="íŠ¸ëŸ¼í«" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸº íŠ¸ëŸ¼í«</span>
                            </label>
                        </div>
                    </div>

                    <!-- í…œí¬ -->
                    <div class="mb-6">
                        <label class="block text-lg font-semibold text-purple-200 mb-4">ì„ í˜¸í•˜ëŠ” í…œí¬</label>
                        <div class="grid grid-cols-3 gap-3">
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="tempo" value="ëŠë¦°" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸŒ ëŠë¦°</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="tempo" value="ì¤‘ê°„" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸš¶ ì¤‘ê°„</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="tempo" value="ë¹ ë¥¸" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸƒ ë¹ ë¥¸</span>
                            </label>
                        </div>
                    </div>

                    <!-- ìŒì•… ì–¸ì–´ -->
                    <div class="mb-6">
                        <label class="block text-lg font-semibold text-purple-200 mb-4">ì¢‹ì•„í•˜ëŠ” ìŒì•… ì–¸ì–´</label>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="languages" value="í•œêµ­ì–´" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ‡°ğŸ‡· í•œêµ­ì–´</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="languages" value="ì˜ì–´" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ‡ºğŸ‡¸ ì˜ì–´</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="languages" value="ì¼ë³¸ì–´" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ‡¯ğŸ‡µ ì¼ë³¸ì–´</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="languages" value="ê¸°íƒ€" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸŒ ê¸°íƒ€</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 4. ë¼ì´í”„ìŠ¤íƒ€ì¼ -->
                <div class="bg-white/10 backdrop-blur-md rounded-2xl p-8 border border-white/20">
                    <h2 class="text-3xl font-bold text-white mb-6 flex items-center">
                        <span class="text-4xl mr-3">ğŸŒŸ</span>
                        ë¼ì´í”„ìŠ¤íƒ€ì¼
                    </h2>
                    
                    <!-- ì½˜ì„œíŠ¸ ê²½í—˜ -->
                    <div class="mb-6">
                        <label class="block text-lg font-semibold text-purple-200 mb-4">ì½˜ì„œíŠ¸/í˜ìŠ¤í‹°ë²Œ ì°¸ì—¬ ê²½í—˜</label>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="concertExperience" value="ì—†ìŒ" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">âŒ ì—†ìŒ</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="concertExperience" value="1-2íšŒ" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ« 1-2íšŒ</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="concertExperience" value="3-5íšŒ" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ« 3-5íšŒ</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="radio" name="concertExperience" value="5íšŒ ì´ìƒ" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ« 5íšŒ ì´ìƒ</span>
                            </label>
                        </div>
                    </div>

                    <!-- ìŒì•… SNS ì‚¬ìš© -->
                    <div class="mb-6">
                        <label class="block text-lg font-semibold text-purple-200 mb-4">ìŒì•… ê´€ë ¨ SNS ì‚¬ìš©</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="musicSNS" value="Spotify" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸµ Spotify</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="musicSNS" value="Apple Music" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ Apple Music</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="musicSNS" value="YouTube Music" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ“º YouTube Music</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="musicSNS" value="Melon" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸˆ Melon</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="musicSNS" value="Genie" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">ğŸ§ Genie</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" name="musicSNS" value="ì‚¬ìš©í•˜ì§€ ì•ŠìŒ" class="w-5 h-5 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500">
                                <span class="text-white group-hover:text-purple-300 transition-colors">âŒ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- ì œì¶œ ë²„íŠ¼ -->
                <div class="text-center">
                    <button type="submit" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 px-8 rounded-full text-xl transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl">
                        ğŸµ ë‚˜ë§Œì˜ ìŒì•… DNA ë¶„ì„í•˜ê¸°
                    </button>
                </div>
            </form>
        </div>

        <!-- ê²°ê³¼ ëª¨ë‹¬ -->
        <div id="resultModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-gradient-to-br from-purple-900 to-blue-900 rounded-3xl p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="text-center mb-8">
                        <h2 class="text-4xl font-bold text-white mb-4">ğŸµ ì„¤ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
                        <p class="text-purple-200 text-lg">ë‹¹ì‹ ì˜ ìŒì•… DNAë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                    </div>
                    
                    <div id="resultContent" class="space-y-6">
                        <!-- ê²°ê³¼ ë‚´ìš©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                    
                    <div class="text-center mt-8">
                        <button onclick="closeResultModal()" class="bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-bold py-3 px-6 rounded-full transform hover:scale-105 transition-all duration-200">
                            ë‹«ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì¸ìƒìŒì•… íƒ„ìƒ í˜ì´ì§€ -->
        <div id="birthPage" class="fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-pink-800 hidden z-50">
            <div class="relative h-full overflow-hidden">
                <!-- ë°°ê²½ íŒŒë™ ì• ë‹ˆë©”ì´ì…˜ -->
                <div class="absolute inset-0">
                    <div class="absolute top-1/4 left-1/4 w-40 h-40 bg-purple-400/20 rounded-full animate-pulse"></div>
                    <div class="absolute top-3/4 right-1/4 w-32 h-32 bg-blue-400/20 rounded-full animate-pulse" style="animation-delay: 1s;"></div>
                    <div class="absolute top-1/2 left-1/2 w-24 h-24 bg-pink-400/20 rounded-full animate-pulse" style="animation-delay: 2s;"></div>
                </div>

                <!-- ë©”ì¸ ì½˜í…ì¸  -->
                <div class="relative z-10 flex flex-col items-center justify-center h-full text-center px-4">
                    <!-- ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ -->
                    <div id="loadingSection" class="mb-12">
                        <div class="inline-block p-6 bg-white/10 backdrop-blur-md rounded-full mb-8">
                            <span class="text-8xl">ğŸµ</span>
                        </div>
                        <h1 class="text-5xl md:text-6xl font-bold text-white mb-6 bg-gradient-to-r from-purple-300 via-pink-300 to-blue-300 bg-clip-text text-transparent">
                            ë‹¹ì‹ ì˜ ì¸ìƒìŒì•…ì´
                        </h1>
                        <h2 class="text-4xl md:text-5xl font-bold text-white mb-8 bg-gradient-to-r from-pink-300 via-blue-300 to-purple-300 bg-clip-text text-transparent">
                            íƒ„ìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤...
                        </h2>
                        
                        <!-- ë¡œë”© ìŠ¤í”¼ë„ˆ -->
                        <div class="flex justify-center mb-8">
                            <div class="relative">
                                <div class="w-16 h-16 border-4 border-purple-200/30 border-t-purple-400 rounded-full animate-spin"></div>
                                <div class="absolute inset-0 w-16 h-16 border-4 border-transparent border-t-pink-400 rounded-full animate-spin" style="animation-duration: 1.5s; animation-direction: reverse;"></div>
                            </div>
                        </div>
                        
                        <p class="text-xl text-purple-200 max-w-2xl mx-auto">
                            ìŒì•… DNAë¥¼ ë¶„ì„í•˜ì—¬ ë‹¹ì‹ ë§Œì˜ ê³ ìœ í•œ ìŒì•… ìºë¦­í„°ë¥¼ ìƒì„±í•˜ê³  ìˆì–´ìš”
                        </p>
                    </div>

                    <!-- ìºë¦­í„° ìƒì„± ì„¹ì…˜ -->
                    <div id="characterSection" class="hidden">
                        <div class="mb-8">
                            <h3 class="text-3xl font-bold text-white mb-4">ğŸ‰ íƒ„ìƒ ì™„ë£Œ!</h3>
                            <p class="text-purple-200 text-lg">ë‹¹ì‹ ì˜ ì¸ìƒìŒì•… ìºë¦­í„°ê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤</p>
                        </div>
                        
                        <!-- ìºë¦­í„° ìº”ë²„ìŠ¤ -->
                        <div class="bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 mb-8">
                            <canvas id="characterCanvas" width="400" height="400" class="mx-auto rounded-2xl cursor-pointer hover:scale-105 transition-transform duration-200"></canvas>
                            <p class="text-center text-purple-200 mt-4 text-sm">ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì—¬ë³´ì„¸ìš”! ğŸ–±ï¸âœ¨</p>
                        </div>
                        
                        <!-- ìºë¦­í„° ì •ë³´ -->
                        <div id="characterInfo" class="bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 mb-8">
                            <!-- ìºë¦­í„° ì •ë³´ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                        </div>
                        
                        <!-- ì•¡ì…˜ ë²„íŠ¼ -->
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <button onclick="downloadCharacter()" class="bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-full transform hover:scale-105 transition-all duration-200">
                                ğŸ’¾ ìºë¦­í„° ë‹¤ìš´ë¡œë“œ
                            </button>
                            <button onclick="shareCharacter()" class="bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-bold py-3 px-6 rounded-full transform hover:scale-105 transition-all duration-200">
                                ğŸ“± SNS ê³µìœ 
                            </button>
                            <button onclick="goBackToSurvey()" class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-bold py-3 px-6 rounded-full transform hover:scale-105 transition-all duration-200">
                                ğŸ”„ ë‹¤ì‹œ ì„¤ë¬¸í•˜ê¸°
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì„¤ë¬¸ ì œì¶œ ì²˜ë¦¬
        document.getElementById('musicSurveyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const surveyData = {};
            
            // í¼ ë°ì´í„° ìˆ˜ì§‘
            for (let [key, value] of formData.entries()) {
                if (surveyData[key]) {
                    if (Array.isArray(surveyData[key])) {
                        surveyData[key].push(value);
                    } else {
                        surveyData[key] = [surveyData[key], value];
                    }
                } else {
                    surveyData[key] = value;
                }
            }
            
            // ì²´í¬ë°•ìŠ¤ ê·¸ë£¹ ì²˜ë¦¬
            const checkboxes = this.querySelectorAll('input[type="checkbox"]:checked');
            checkboxes.forEach(checkbox => {
                const name = checkbox.name;
                if (!surveyData[name]) {
                    surveyData[name] = [];
                }
                if (Array.isArray(surveyData[name])) {
                    surveyData[name].push(checkbox.value);
                } else {
                    surveyData[name] = [surveyData[name], checkbox.value];
                }
            });
            
            try {
                const response = await fetch('/api/survey', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(surveyData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showResults(result.analysis);
                } else {
                    alert('ì„¤ë¬¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        });

        // ê²°ê³¼ í‘œì‹œ
        function showResults(analysis) {
            const modal = document.getElementById('resultModal');
            const content = document.getElementById('resultContent');
            
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20">
                        <h3 class="text-2xl font-bold text-white mb-4">ğŸ­ ìŒì•… ì„±ê²©</h3>
                        <p class="text-purple-200 text-lg">${analysis.musicPersonality}</p>
                    </div>
                    
                    <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20">
                        <h3 class="text-2xl font-bold text-white mb-4">â° ì²­ì·¨ ìŠµê´€</h3>
                        <p class="text-purple-200 text-lg">${analysis.listeningHabits}</p>
                    </div>
                    
                    <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20">
                        <h3 class="text-2xl font-bold text-white mb-4">ğŸ’ ê°ì • í”„ë¡œí•„</h3>
                        <p class="text-purple-200 text-lg">${analysis.emotionalProfile}</p>
                    </div>
                    
                    <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20">
                        <h3 class="text-2xl font-bold text-white mb-4">ğŸµ ì¶”ì²œ ì¥ë¥´</h3>
                        <p class="text-purple-200 text-lg">${analysis.recommendations.join(', ')}</p>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-2xl p-6 border border-white/20 text-center">
                    <h3 class="text-2xl font-bold text-white mb-4">ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!</h3>
                    <p class="text-purple-200 text-lg">ë‹¹ì‹ ë§Œì˜ ê³ ìœ í•œ ìŒì•… í”„ë¡œí•„ì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                    <p class="text-purple-300 mt-2">ì´ì œ ë” ë‚˜ì€ ìŒì•…ì„ ë°œê²¬í•´ë³´ì„¸ìš”.</p>
                </div>
            `;
            
            modal.classList.remove('hidden');
            
            // 3ì´ˆ í›„ ì¸ìƒìŒì•… íƒ„ìƒ í˜ì´ì§€ë¡œ ì´ë™
            setTimeout(() => {
                modal.classList.add('hidden');
                showBirthPage(analysis);
            }, 3000);
        }

        // ì¸ìƒìŒì•… íƒ„ìƒ í˜ì´ì§€ í‘œì‹œ
        function showBirthPage(analysis) {
            const birthPage = document.getElementById('birthPage');
            const loadingSection = document.getElementById('loadingSection');
            const characterSection = document.getElementById('characterSection');
            
            birthPage.classList.remove('hidden');
            
            // ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ (5ì´ˆ)
            setTimeout(() => {
                loadingSection.classList.add('hidden');
                characterSection.classList.remove('hidden');
                
                // ìºë¦­í„° ìƒì„±
                createCharacter(analysis);
            }, 5000);
        }

        // ìºë¦­í„° ìƒì„±
        function createCharacter(analysis) {
            const canvas = document.getElementById('characterCanvas');
            const ctx = canvas.getContext('2d');
            const characterInfo = document.getElementById('characterInfo');
            
            // ìºë¦­í„° ì •ë³´ í‘œì‹œ
            characterInfo.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="text-xl font-bold text-white mb-2">ğŸ­ ìŒì•… ì„±ê²©</h4>
                        <p class="text-purple-200">${analysis.musicPersonality}</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold text-white mb-2">ğŸµ ì„ í˜¸ ì¥ë¥´</h4>
                        <p class="text-purple-200">${analysis.topGenres.join(', ')}</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold text-white mb-2">â° ì²­ì·¨ ìŠµê´€</h4>
                        <p class="text-purple-200">${analysis.listeningHabits}</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold text-white mb-2">ğŸ’ ê°ì • í”„ë¡œí•„</h4>
                        <p class="text-purple-200">${analysis.emotionalProfile}</p>
                    </div>
                </div>
            `;
            
            // ì‹¤ì‹œê°„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
            startCharacterAnimation(ctx, analysis);
        }

        // ì‹¤ì‹œê°„ ìºë¦­í„° ì• ë‹ˆë©”ì´ì…˜
        function startCharacterAnimation(ctx, analysis) {
            let mouseX = 200;
            let mouseY = 200;
            let isHovering = false;
            let clickCount = 0;
            
            // ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            const canvas = document.getElementById('characterCanvas');
            
            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                mouseX = e.clientX - rect.left;
                mouseY = e.clientY - rect.top;
            });
            
            canvas.addEventListener('mouseenter', () => {
                isHovering = true;
            });
            
            canvas.addEventListener('mouseleave', () => {
                isHovering = false;
            });
            
            canvas.addEventListener('click', () => {
                clickCount++;
                // í´ë¦­í•  ë•Œë§ˆë‹¤ íŠ¹ë³„í•œ íš¨ê³¼
                createClickEffect(ctx, mouseX, mouseY, analysis);
            });
            
            function animate() {
                // ìº”ë²„ìŠ¤ ì´ˆê¸°í™”
                ctx.clearRect(0, 0, 400, 400);
                
                // ìºë¦­í„° ê·¸ë¦¬ê¸° (ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì™€ í˜¸ë²„ ìƒíƒœ ì „ë‹¬)
                drawCharacter(ctx, analysis, mouseX, mouseY, isHovering, clickCount);
                
                // ë‹¤ìŒ í”„ë ˆì„ ìš”ì²­
                requestAnimationFrame(animate);
            }
            
            // ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
            animate();
        }

        // í´ë¦­ íš¨ê³¼ ìƒì„±
        function createClickEffect(ctx, x, y, analysis) {
            const particles = [];
            const particleCount = 20;
            
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() - 0.5) * 10,
                    life: 1,
                    decay: 0.02,
                    color: getRandomColor(analysis)
                });
            }
            
            // íŒŒí‹°í´ ì• ë‹ˆë©”ì´ì…˜
            function animateParticles() {
                particles.forEach((particle, index) => {
                    particle.x += particle.vx;
                    particle.y += particle.vy;
                    particle.life -= particle.decay;
                    
                    if (particle.life > 0) {
                        ctx.save();
                        ctx.globalAlpha = particle.life;
                        ctx.fillStyle = particle.color;
                        ctx.beginPath();
                        ctx.arc(particle.x, particle.y, 3, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.restore();
                    }
                });
                
                // ì‚´ì•„ìˆëŠ” íŒŒí‹°í´ì´ ìˆìœ¼ë©´ ê³„ì† ì• ë‹ˆë©”ì´ì…˜
                if (particles.some(p => p.life > 0)) {
                    requestAnimationFrame(animateParticles);
                }
            }
            
            animateParticles();
        }

        // ë¶„ì„ ê²°ê³¼ì— ë”°ë¥¸ ëœë¤ ìƒ‰ìƒ
        function getRandomColor(analysis) {
            const colors = [
                '#8b5cf6', '#ec4899', '#3b82f6', '#10b981', '#f59e0b',
                '#ef4444', '#06b6d4', '#84cc16', '#f97316', '#a855f7'
            ];
            
            // ìŒì•… ì„±ê²©ì— ë”°ë¥¸ ìƒ‰ìƒ ì„ íƒ
            if (analysis.musicPersonality.includes('íŠ¸ë Œë””')) {
                return colors[1]; // í•‘í¬
            } else if (analysis.musicPersonality.includes('ì§€ì„±íŒŒ')) {
                return colors[2]; // ë¸”ë£¨
            } else if (analysis.musicPersonality.includes('í™œë°œí•œ')) {
                return colors[4]; // ì˜¤ë Œì§€
            } else {
                return colors[0]; // ë³´ë¼
            }
        }

        // ìºë¦­í„° ê·¸ë¦¬ê¸° í•¨ìˆ˜ (ì‚¬ë‘ìŠ¤ëŸ¬ìš´ ì…ì²´ì  ìºë¦­í„°)
        function drawCharacter(ctx, analysis, mouseX, mouseY, isHovering, clickCount) {
            const centerX = 200;
            const centerY = 200;
            const time = Date.now() * 0.001;
            
            // ë§ˆìš°ìŠ¤ì™€ì˜ ê±°ë¦¬ ê³„ì‚°
            const mouseDistance = Math.sqrt((mouseX - centerX) ** 2 + (mouseY - centerY) ** 2);
            const mouseInfluence = Math.max(0, 1 - mouseDistance / 200);
            
            // í˜¸ë²„ íš¨ê³¼ ê°•í™”
            const hoverMultiplier = isHovering ? 1.5 : 1;
            
            // ìºë¦­í„° íƒ€ì… ê²°ì • (ê²½ìš°ì˜ ìˆ˜ë³„)
            const characterType = determineCharacterType(analysis);
            
            // ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ (ìºë¦­í„° íƒ€ì…ë³„)
            drawBackground(ctx, centerX, centerY, time, characterType, mouseX, mouseY);
            
            // ë©”ì¸ ìºë¦­í„° ëª¸ì²´ (ì…ì²´ì )
            drawCharacterBody(ctx, centerX, centerY, time, characterType, mouseX, mouseY, isHovering, mouseInfluence);
            
            // ìºë¦­í„° ì–¼êµ´ (ì‚¬ë‘ìŠ¤ëŸ¬ìš´)
            drawCharacterFace(ctx, centerX, centerY, time, characterType, mouseX, mouseY, isHovering);
            
            // ìºë¦­í„° ì•¡ì„¸ì„œë¦¬ (ê°œì„±)
            drawCharacterAccessories(ctx, centerX, centerY, time, characterType, mouseX, mouseY, isHovering);
            
            // íŒŒí‹°í´ ì‹œìŠ¤í…œ (ìºë¦­í„° íƒ€ì…ë³„)
            drawParticles(ctx, centerX, centerY, time, characterType, mouseX, mouseY, isHovering);
            
            // ë§ˆìš°ìŠ¤ ì¶”ì  íš¨ê³¼
            if (isHovering) {
                drawMouseTrail(ctx, mouseX, mouseY, time, characterType);
            }
        }

        // ìºë¦­í„° íƒ€ì… ê²°ì • (ê²½ìš°ì˜ ìˆ˜ë³„)
        function determineCharacterType(analysis) {
            let type = {
                personality: '',
                genre: '',
                emotion: '',
                tempo: '',
                style: ''
            };
            
            // ìŒì•… ì„±ê²© ê²°ì •
            if (analysis.musicPersonality.includes('íŠ¸ë Œë””')) {
                type.personality = 'trendy';
            } else if (analysis.musicPersonality.includes('ì§€ì„±íŒŒ')) {
                type.personality = 'intellectual';
            } else if (analysis.musicPersonality.includes('í™œë°œí•œ')) {
                type.personality = 'energetic';
            } else {
                type.personality = 'open-minded';
            }
            
            // ì¥ë¥´ ê²°ì •
            if (analysis.topGenres.includes('K-POP')) {
                type.genre = 'kpop';
            } else if (analysis.topGenres.includes('ì¬ì¦ˆ')) {
                type.genre = 'jazz';
            } else if (analysis.topGenres.includes('í™í•©')) {
                type.genre = 'hiphop';
            } else if (analysis.topGenres.includes('í´ë˜ì‹')) {
                type.genre = 'classical';
            } else if (analysis.topGenres.includes('ì¼ë ‰íŠ¸ë¡œë‹‰')) {
                type.genre = 'electronic';
            } else {
                type.genre = 'mixed';
            }
            
            // ê°ì • ê²°ì •
            if (analysis.emotionalProfile.includes('ì„¬ì„¸í•œ ê°ì„±')) {
                type.emotion = 'sensitive';
            } else if (analysis.emotionalProfile.includes('ì‹¤ìš©ì ')) {
                type.emotion = 'practical';
            } else {
                type.emotion = 'independent';
            }
            
            // í…œí¬ ê²°ì •
            if (analysis.topGenres.includes('ì¼ë ‰íŠ¸ë¡œë‹‰') || analysis.topGenres.includes('í™í•©')) {
                type.tempo = 'fast';
            } else if (analysis.topGenres.includes('í´ë˜ì‹') || analysis.topGenres.includes('ì¬ì¦ˆ')) {
                type.tempo = 'slow';
            } else {
                type.tempo = 'medium';
            }
            
            // ìŠ¤íƒ€ì¼ ê²°ì •
            if (analysis.topGenres.includes('K-POP') && analysis.topGenres.includes('ì¼ë ‰íŠ¸ë¡œë‹‰')) {
                type.style = 'futuristic';
            } else if (analysis.topGenres.includes('ì¬ì¦ˆ') && analysis.topGenres.includes('í´ë˜ì‹')) {
                type.style = 'elegant';
            } else if (analysis.topGenres.includes('í™í•©') && analysis.topGenres.includes('ë¡')) {
                type.style = 'rebellious';
            } else {
                type.style = 'balanced';
            }
            
            return type;
        }

        // ë°°ê²½ ê·¸ë¦¬ê¸° (ìºë¦­í„° íƒ€ì…ë³„)
        function drawBackground(ctx, centerX, centerY, time, characterType, mouseX, mouseY) {
            const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, 200);
            
            // ìºë¦­í„° íƒ€ì…ë³„ ë°°ê²½ ìƒ‰ìƒ
            let color1, color2, color3;
            
            switch (characterType.personality) {
                case 'trendy':
                    color1 = `hsla(${(time * 30 + mouseX * 0.1) % 360}, 80%, 70%, 0.4)`;
                    color2 = `hsla(${(time * 45 + mouseY * 0.1) % 360}, 80%, 60%, 0.3)`;
                    color3 = `hsla(${(time * 60) % 360}, 80%, 50%, 0.2)`;
                    break;
                case 'intellectual':
                    color1 = `hsla(${(time * 20 + mouseX * 0.05) % 360}, 60%, 60%, 0.4)`;
                    color2 = `hsla(${(time * 35 + mouseY * 0.05) % 360}, 60%, 50%, 0.3)`;
                    color3 = `hsla(${(time * 50) % 360}, 60%, 40%, 0.2)`;
                    break;
                case 'energetic':
                    color1 = `hsla(${(time * 40 + mouseX * 0.15) % 360}, 90%, 70%, 0.4)`;
                    color2 = `hsla(${(time * 55 + mouseY * 0.15) % 360}, 90%, 60%, 0.3)`;
                    color3 = `hsla(${(time * 70) % 360}, 90%, 50%, 0.2)`;
                    break;
                default:
                    color1 = `hsla(${(time * 25 + mouseX * 0.1) % 360}, 70%, 65%, 0.4)`;
                    color2 = `hsla(${(time * 40 + mouseY * 0.1) % 360}, 70%, 55%, 0.3)`;
                    color3 = `hsla(${(time * 55) % 360}, 70%, 45%, 0.2)`;
            }
            
            gradient.addColorStop(0, color1);
            gradient.addColorStop(0.5, color2);
            gradient.addColorStop(1, color3);
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 400, 400);
        }

        // ìºë¦­í„° ëª¸ì²´ ê·¸ë¦¬ê¸° (ì…ì²´ì )
        function drawCharacterBody(ctx, centerX, centerY, time, characterType, mouseX, mouseY, isHovering, mouseInfluence) {
            const baseRadius = 80 + (isHovering ? 15 : 0);
            
            // ê·¸ë¦¼ì íš¨ê³¼ (3D ì…ì²´ê°)
            ctx.shadowColor = 'rgba(0, 0, 0, 0.4)';
            ctx.shadowBlur = 25;
            ctx.shadowOffsetX = 8;
            ctx.shadowOffsetY = 8;
            
            // ë©”ì¸ ëª¸ì²´ (ì…ì²´ì  íŒŒë™)
            ctx.beginPath();
            
            // ìºë¦­í„° íƒ€ì…ë³„ íŒŒë™ íŒ¨í„´
            let wavePattern;
            switch (characterType.tempo) {
                case 'fast':
                    wavePattern = Math.sin(angle * 8 + time * 6) * 25 * hoverMultiplier;
                    break;
                case 'slow':
                    wavePattern = Math.sin(angle * 4 + time * 2) * 15 * hoverMultiplier;
                    break;
                default:
                    wavePattern = Math.sin(angle * 6 + time * 4) * 20 * hoverMultiplier;
            }
            
            for (let angle = 0; angle < Math.PI * 2; angle += 0.05) {
                // ë³µí•© íŒŒë™ í•¨ìˆ˜ (ì…ì²´ê° ê°•í™”)
                const complexWave = wavePattern +
                                   Math.sin(angle * 12 + time * 3) * 12 * hoverMultiplier +
                                   Math.sin(angle * 3 + time * 2.5) * 18 * hoverMultiplier +
                                   Math.sin(angle * 4 + mouseDistance * 0.01) * mouseInfluence * 15;
                
                const radius = baseRadius + complexWave;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                
                if (angle === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.closePath();
            
            // ì…ì²´ì  ê·¸ë¼ë°ì´ì…˜ (ë³¼ë¥¨ê°)
            const bodyGradient = ctx.createRadialGradient(
                centerX - baseRadius * 0.3, centerY - baseRadius * 0.3, 0,
                centerX, centerY, baseRadius
            );
            
            // ìºë¦­í„° íƒ€ì…ë³„ ëª¸ì²´ ìƒ‰ìƒ
            let bodyColor1, bodyColor2, bodyColor3;
            switch (characterType.genre) {
                case 'kpop':
                    bodyColor1 = '#ec4899';
                    bodyColor2 = '#f97316';
                    bodyColor3 = '#8b5cf6';
                    break;
                case 'jazz':
                    bodyColor1 = '#10b981';
                    bodyColor2 = '#06b6d4';
                    bodyColor3 = '#3b82f6';
                    break;
                case 'hiphop':
                    bodyColor1 = '#f59e0b';
                    bodyColor2 = '#ef4444';
                    bodyColor3 = '#000000';
                    break;
                case 'classical':
                    bodyColor1 = '#fbbf24';
                    bodyColor2 = '#84cc16';
                    bodyColor3 = '#a855f7';
                    break;
                case 'electronic':
                    bodyColor1 = '#8b5cf6';
                    bodyColor2 = '#ec4899';
                    bodyColor3 = '#06b6d4';
                    break;
                default:
                    bodyColor1 = '#8b5cf6';
                    bodyColor2 = '#ec4899';
                    bodyColor3 = '#3b82f6';
            }
            
            bodyGradient.addColorStop(0, bodyColor1);
            bodyGradient.addColorStop(0.4, bodyColor2);
            bodyGradient.addColorStop(1, bodyColor3);
            
            ctx.fillStyle = bodyGradient;
            ctx.fill();
            
            // ê·¸ë¦¼ì íš¨ê³¼ ì œê±°
            ctx.shadowBlur = 0;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            
            // í…Œë‘ë¦¬ (ì…ì²´ê°)
            ctx.strokeStyle = `rgba(255, 255, 255, ${0.6 + mouseInfluence * 0.3})`;
            ctx.lineWidth = 3 + (isHovering ? 2 : 0);
            ctx.stroke();
            
            // í•˜ì´ë¼ì´íŠ¸ (3D ë³¼ë¥¨ê°)
            drawHighlights(ctx, centerX, centerY, baseRadius, characterType, time);
        }

        // í•˜ì´ë¼ì´íŠ¸ ê·¸ë¦¬ê¸° (3D ë³¼ë¥¨ê°)
        function drawHighlights(ctx, centerX, centerY, radius, characterType, time) {
            const highlightGradient = ctx.createRadialGradient(
                centerX - radius * 0.4, centerY - radius * 0.4, 0,
                centerX, centerY, radius * 0.8
            );
            
            highlightGradient.addColorStop(0, 'rgba(255, 255, 255, 0.8)');
            highlightGradient.addColorStop(0.3, 'rgba(255, 255, 255, 0.4)');
            highlightGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
            
            ctx.fillStyle = highlightGradient;
            ctx.globalCompositeOperation = 'overlay';
            ctx.fill();
            ctx.globalCompositeOperation = 'source-over';
        }

        // ìºë¦­í„° ì–¼êµ´ ê·¸ë¦¬ê¸° (ì‚¬ë‘ìŠ¤ëŸ¬ìš´)
        function drawCharacterFace(ctx, centerX, centerY, time, characterType, mouseX, mouseY, isHovering) {
            const faceRadius = 45;
            const faceX = centerX;
            const faceY = centerY - 20;
            
            // ì–¼êµ´ ë°°ê²½ (ì…ì²´ì )
            ctx.beginPath();
            ctx.arc(faceX, faceY, faceRadius, 0, Math.PI * 2);
            
            const faceGradient = ctx.createRadialGradient(
                faceX - faceRadius * 0.3, faceY - faceRadius * 0.3, 0,
                faceX, faceY, faceRadius
            );
            
            // ìºë¦­í„° íƒ€ì…ë³„ ì–¼êµ´ ìƒ‰ìƒ
            let faceColor;
            switch (characterType.personality) {
                case 'trendy':
                    faceColor = '#fecaca';
                    break;
                case 'intellectual':
                    faceColor = '#dbeafe';
                    break;
                case 'energetic':
                    faceColor = '#fef3c7';
                    break;
                default:
                    faceColor = '#e0e7ff';
            }
            
            faceGradient.addColorStop(0, faceColor);
            faceGradient.addColorStop(1, adjustBrightness(faceColor, -20));
            
            ctx.fillStyle = faceGradient;
            ctx.fill();
            
            // ì–¼êµ´ í…Œë‘ë¦¬
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // ëˆˆ ê·¸ë¦¬ê¸° (ì‚¬ë‘ìŠ¤ëŸ¬ìš´)
            drawEyes(ctx, faceX, faceY, characterType, time, mouseX, mouseY, isHovering);
            
            // ì… ê·¸ë¦¬ê¸° (ê°ì • í‘œí˜„)
            drawMouth(ctx, faceX, faceY, characterType, time, mouseX, mouseY, isHovering);
            
            // ë³¼ ê·¸ë¦¬ê¸° (ê·€ì—¬ìš´)
            drawCheeks(ctx, faceX, faceY, characterType, time);
        }

        // ëˆˆ ê·¸ë¦¬ê¸° (ì‚¬ë‘ìŠ¤ëŸ¬ìš´)
        function drawEyes(ctx, faceX, faceY, characterType, time, mouseX, mouseY, isHovering) {
            const eyeSize = 8;
            const eyeSpacing = 25;
            
            // ì™¼ìª½ ëˆˆ
            const leftEyeX = faceX - eyeSpacing;
            const leftEyeY = faceY - 5;
            
            // ì˜¤ë¥¸ìª½ ëˆˆ
            const rightEyeX = faceX + eyeSpacing;
            const rightEyeY = faceY - 5;
            
            // ëˆˆë™ì (ë§ˆìš°ìŠ¤ ì¶”ì )
            const mouseAngle = Math.atan2(mouseY - faceY, mouseX - faceX);
            const eyeOffset = Math.min(3, Math.sqrt((mouseX - faceX) ** 2 + (mouseY - faceY) ** 2) * 0.01);
            
            // ì™¼ìª½ ëˆˆ
            ctx.beginPath();
            ctx.arc(leftEyeX, leftEyeY, eyeSize, 0, Math.PI * 2);
            ctx.fillStyle = 'white';
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(leftEyeX + Math.cos(mouseAngle) * eyeOffset, leftEyeY + Math.sin(mouseAngle) * eyeOffset, eyeSize * 0.6, 0, Math.PI * 2);
            ctx.fillStyle = characterType.personality === 'energetic' ? '#f59e0b' : '#3b82f6';
            ctx.fill();
            
            // ì˜¤ë¥¸ìª½ ëˆˆ
            ctx.beginPath();
            ctx.arc(rightEyeX, rightEyeY, eyeSize, 0, Math.PI * 2);
            ctx.fillStyle = 'white';
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(rightEyeX + Math.cos(mouseAngle) * eyeOffset, rightEyeY + Math.sin(mouseAngle) * eyeOffset, eyeSize * 0.6, 0, Math.PI * 2);
            ctx.fillStyle = characterType.personality === 'energetic' ? '#f59e0b' : '#3b82f6';
            ctx.fill();
            
            // ê¹œë¹¡ì„ íš¨ê³¼
            if (Math.random() < 0.01) {
                ctx.fillStyle = 'white';
                ctx.fillRect(leftEyeX - eyeSize, leftEyeY - eyeSize, eyeSize * 2, eyeSize * 2);
                ctx.fillRect(rightEyeX - eyeSize, rightEyeY - eyeSize, eyeSize * 2, eyeSize * 2);
            }
        }

        // ì… ê·¸ë¦¬ê¸° (ê°ì • í‘œí˜„)
        function drawMouth(ctx, faceX, faceY, characterType, time, mouseX, mouseY, isHovering) {
            const mouthY = faceY + 15;
            
            // ìºë¦­í„° íƒ€ì…ë³„ ì… ëª¨ì–‘
            let mouthShape;
            switch (characterType.emotion) {
                case 'sensitive':
                    mouthShape = 'sad';
                    break;
                case 'practical':
                    mouthShape = 'neutral';
                    break;
                default:
                    mouthShape = 'happy';
            }
            
            ctx.strokeStyle = characterType.personality === 'energetic' ? '#f59e0b' : '#ef4444';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            
            switch (mouthShape) {
                case 'happy':
                    ctx.beginPath();
                    ctx.arc(faceX, mouthY, 12, 0, Math.PI);
                    ctx.stroke();
                    break;
                case 'sad':
                    ctx.beginPath();
                    ctx.arc(faceX, mouthY + 12, 12, Math.PI, Math.PI * 2);
                    ctx.stroke();
                    break;
                default:
                    ctx.beginPath();
                    ctx.moveTo(faceX - 8, mouthY);
                    ctx.lineTo(faceX + 8, mouthY);
                    ctx.stroke();
            }
        }

        // ë³¼ ê·¸ë¦¬ê¸° (ê·€ì—¬ìš´)
        function drawCheeks(ctx, faceX, faceY, characterType, time) {
            const cheekSize = 6;
            const cheekSpacing = 35;
            
            // ì™¼ìª½ ë³¼
            ctx.beginPath();
            ctx.arc(faceX - cheekSpacing, faceY + 5, cheekSize, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(255, 182, 193, ${0.6 + Math.sin(time * 2) * 0.2})`;
            ctx.fill();
            
            // ì˜¤ë¥¸ìª½ ë³¼
            ctx.beginPath();
            ctx.arc(faceX + cheekSpacing, faceY + 5, cheekSize, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(255, 182, 193, ${0.6 + Math.sin(time * 2 + 1) * 0.2})`;
            ctx.fill();
        }

        // ìºë¦­í„° ì•¡ì„¸ì„œë¦¬ ê·¸ë¦¬ê¸° (ê°œì„±)
        function drawCharacterAccessories(ctx, centerX, centerY, time, characterType, mouseX, mouseY, isHovering) {
            // ìºë¦­í„° íƒ€ì…ë³„ ì•¡ì„¸ì„œë¦¬
            switch (characterType.genre) {
                case 'kpop':
                    drawKpopAccessories(ctx, centerX, centerY, time, mouseX, mouseY, isHovering);
                    break;
                case 'jazz':
                    drawJazzAccessories(ctx, centerX, centerY, time, mouseX, mouseY, isHovering);
                    break;
                case 'hiphop':
                    drawHiphopAccessories(ctx, centerX, centerY, time, mouseX, mouseY, isHovering);
                    break;
                case 'classical':
                    drawClassicalAccessories(ctx, centerX, centerY, time, mouseX, mouseY, isHovering);
                    break;
                case 'electronic':
                    drawElectronicAccessories(ctx, centerX, centerY, time, mouseX, mouseY, isHovering);
                    break;
            }
        }

        // K-POP ì•¡ì„¸ì„œë¦¬
        function drawKpopAccessories(ctx, centerX, centerY, time, mouseX, mouseY, isHovering) {
            // í—¤ì–´ë°´ë“œ
            ctx.beginPath();
            ctx.arc(centerX, centerY - 80, 60, Math.PI, Math.PI * 2);
            ctx.strokeStyle = `hsla(${(time * 100) % 360}, 80%, 60%, 0.8)`;
            ctx.lineWidth = 4;
            ctx.stroke();
            
            // ìŠ¤íŒŒí´ íš¨ê³¼
            for (let i = 0; i < 8; i++) {
                const angle = (i / 8) * Math.PI * 2 + time * 0.5;
                const x = centerX + Math.cos(angle) * 100;
                const y = centerY + Math.sin(angle) * 100;
                
                ctx.fillStyle = `rgba(255, 215, 0, ${0.7 + Math.sin(time * 3 + i) * 0.3})`;
                ctx.beginPath();
                ctx.arc(x, y, 3 + Math.sin(time * 4 + i) * 2, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // ì¬ì¦ˆ ì•¡ì„¸ì„œë¦¬
        function drawJazzAccessories(ctx, centerX, centerY, time, mouseX, mouseY, isHovering) {
            // ëª¨ì
            ctx.beginPath();
            ctx.ellipse(centerX, centerY - 85, 50, 20, 0, 0, Math.PI * 2);
            ctx.fillStyle = `hsla(${(time * 50) % 360}, 60%, 40%, 0.9)`;
            ctx.fill();
            
            // ìŒí‘œ
            const notes = ['â™ª', 'â™«', 'â™¬'];
            notes.forEach((note, index) => {
                const x = centerX - 60 + index * 40;
                const y = centerY - 60;
                
                ctx.fillStyle = `hsla(${(time * 30 + index * 60) % 360}, 70%, 50%, 0.8)`;
                ctx.font = '24px Arial';
                ctx.fillText(note, x, y);
            });
        }

        // í™í•© ì•¡ì„¸ì„œë¦¬
        function drawHiphopAccessories(ctx, centerX, centerY, time, mouseX, mouseY, isHovering) {
            // ëª¨ì
            ctx.beginPath();
            ctx.rect(centerX - 45, centerY - 90, 90, 15);
            ctx.fillStyle = '#000000';
            ctx.fill();
            
            // ì²´ì¸
            for (let i = 0; i < 5; i++) {
                const x = centerX - 40 + i * 20;
                const y = centerY - 30;
                
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, Math.PI * 2);
                ctx.strokeStyle = '#f59e0b';
                ctx.lineWidth = 3;
                ctx.stroke();
            }
        }

        // í´ë˜ì‹ ì•¡ì„¸ì„œë¦¬
        function drawClassicalAccessories(ctx, centerX, centerY, time, mouseX, mouseY, isHovering) {
            // ì™•ê´€
            const crownPoints = [
                { x: centerX - 40, y: centerY - 90 },
                { x: centerX - 20, y: centerY - 100 },
                { x: centerX, y: centerY - 110 },
                { x: centerX + 20, y: centerY - 100 },
                { x: centerX + 40, y: centerY - 90 }
            ];
            
            ctx.beginPath();
            ctx.moveTo(crownPoints[0].x, crownPoints[0].y);
            crownPoints.forEach(point => {
                ctx.lineTo(point.x, point.y);
            });
            ctx.closePath();
            
            ctx.fillStyle = `hsla(${(time * 20) % 360}, 80%, 60%, 0.9)`;
            ctx.fill();
        }

        // ì¼ë ‰íŠ¸ë¡œë‹‰ ì•¡ì„¸ì„œë¦¬
        function drawElectronicAccessories(ctx, centerX, centerY, time, mouseX, mouseY, isHovering) {
            // ì•ˆí…Œë‚˜
            ctx.beginPath();
            ctx.moveTo(centerX - 30, centerY - 90);
            ctx.lineTo(centerX - 30, centerY - 120);
            ctx.strokeStyle = '#8b5cf6';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // LED ë¶ˆë¹›
            ctx.beginPath();
            ctx.arc(centerX - 30, centerY - 120, 5, 0, Math.PI * 2);
            ctx.fillStyle = `hsla(${(time * 200) % 360}, 100%, 60%, 0.8)`;
            ctx.fill();
        }

        // ìƒ‰ìƒ ë°ê¸° ì¡°ì • í•¨ìˆ˜
        function adjustBrightness(color, percent) {
            const num = parseInt(color.replace("#", ""), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }

        // ë§ˆìš°ìŠ¤ ì¶”ì  íš¨ê³¼
        function drawMouseTrail(ctx, mouseX, mouseY, time, characterType) {
            ctx.strokeStyle = `hsla(${(time * 100) % 360}, 70%, 60%, 0.6)`;
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            
            // ë§ˆìš°ìŠ¤ ì£¼ë³€ì— ì‘ì€ ì› ê·¸ë¦¬ê¸°
            ctx.beginPath();
            ctx.arc(mouseX, mouseY, 5 + Math.sin(time * 5) * 3, 0, Math.PI * 2);
            ctx.stroke();
            
            // ë§ˆìš°ìŠ¤ì—ì„œ ìºë¦­í„°ë¡œ í–¥í•˜ëŠ” ì„ 
            const centerX = 200;
            const centerY = 200;
            const distance = Math.sqrt((mouseX - centerX) ** 2 + (mouseY - centerY) ** 2);
            
            if (distance > 100) {
                ctx.beginPath();
                ctx.moveTo(mouseX, mouseY);
                ctx.lineTo(centerX, centerY);
                ctx.strokeStyle = `hsla(${(time * 100) % 360}, 70%, 60%, ${0.3 * (1 - distance / 200)})`;
                ctx.stroke();
            }
        }

        // ë‚´ë¶€ íŒŒë™ ê·¸ë¦¬ê¸°
        function drawInnerWaves(ctx, centerX, centerY, time, analysis, mouseX, mouseY, isHovering) {
            const innerRadius = 40;
            const timeScale = analysis.listeningHabits.includes('4ì‹œê°„ ì´ìƒ') ? 2 : 1;
            
            ctx.beginPath();
            for (let angle = 0; angle < Math.PI * 2; angle += 0.1) {
                const wave = Math.sin(angle * 8 + time * timeScale * 2) * 8 +
                             Math.sin(angle * 4 + time * timeScale * 1.5) * 5;
                
                const x = centerX + Math.cos(angle) * (innerRadius + wave);
                const y = centerY + Math.sin(angle) * (innerRadius + wave);
                
                if (angle === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.closePath();
            
            ctx.strokeStyle = `rgba(255, 255, 255, ${0.3 + Math.sin(time * 2) * 0.2})`;
            ctx.lineWidth = 1;
            ctx.stroke();
        }

        // ìŠ¤íŒŒí´ íš¨ê³¼ (K-POP) - ê³ ë„í™”
        function drawSparkles(ctx, centerX, centerY, time, mouseX, mouseY, isHovering) {
            const sparkleCount = 12;
            for (let i = 0; i < sparkleCount; i++) {
                const angle = (i / sparkleCount) * Math.PI * 2 + time * 0.5;
                const distance = 120 + Math.sin(time * 3 + i) * 20;
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance;
                
                const sparkleSize = 2 + Math.sin(time * 4 + i) * 2;
                const alpha = 0.5 + Math.sin(time * 2 + i) * 0.5;
                
                ctx.fillStyle = `rgba(251, 191, 36, ${alpha})`;
                ctx.beginPath();
                ctx.arc(x, y, sparkleSize, 0, Math.PI * 2);
                ctx.fill();
                
                // ë¹›ë‚˜ëŠ” íš¨ê³¼
                ctx.shadowColor = '#fbbf24';
                ctx.shadowBlur = 10;
                ctx.fill();
                ctx.shadowBlur = 0;
            }
        }

        // ì¬ì¦ˆ ë…¸íŠ¸ (ì¬ì¦ˆ) - ê³ ë„í™”
        function drawJazzNotes(ctx, centerX, centerY, time, mouseX, mouseY, isHovering) {
            const notes = ['â™ª', 'â™«', 'â™¬', 'â™©'];
            const positions = [
                { x: -100, y: -100, angle: time * 0.5 },
                { x: 100, y: 100, angle: time * 0.7 },
                { x: -80, y: 80, angle: time * 0.3 },
                { x: 80, y: -80, angle: time * 0.9 }
            ];
            
            notes.forEach((note, index) => {
                const pos = positions[index];
                const x = centerX + pos.x;
                const y = centerY + pos.y;
                
                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(pos.angle);
                
                ctx.fillStyle = `hsla(16, 100%, 50%, ${0.7 + Math.sin(time * 2 + index) * 0.3})`;
                ctx.font = `${20 + Math.sin(time * 3 + index) * 5}px Arial`;
                ctx.fillText(note, 0, 0);
                
                ctx.restore();
            });
        }

        // í™í•© ìš”ì†Œ (í™í•©) - ê³ ë„í™”
        function drawHipHopElements(ctx, centerX, centerY, time, mouseX, mouseY, isHovering) {
            const words = ['BEAT', 'FLOW', 'RHYTHM', 'STYLE'];
            const positions = [
                { x: -80, y: -120, scale: 1 + Math.sin(time * 4) * 0.2 },
                { x: 80, y: 120, scale: 1 + Math.sin(time * 4 + 1) * 0.2 },
                { x: -120, y: 80, scale: 1 + Math.sin(time * 4 + 2) * 0.2 },
                { x: 120, y: -80, scale: 1 + Math.sin(time * 4 + 3) * 0.2 }
            ];
            
            words.forEach((word, index) => {
                const pos = positions[index];
                const x = centerX + pos.x;
                const y = centerY + pos.y;
                
                ctx.save();
                ctx.translate(x, y);
                ctx.scale(pos.scale, pos.scale);
                
                ctx.fillStyle = `hsla(45, 100%, 50%, ${0.8 + Math.sin(time * 2 + index) * 0.2})`;
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(word, 0, 0);
                
                ctx.restore();
            });
        }

        // í´ë˜ì‹ ìš”ì†Œ (í´ë˜ì‹)
        function drawClassicalElements(ctx, centerX, centerY, time, mouseX, mouseY, isHovering) {
            const elements = ['â™”', 'â™•', 'â™–', 'â™—'];
            const positions = [
                { x: -90, y: -90, size: 24 },
                { x: 90, y: 90, size: 24 },
                { x: -90, y: 90, size: 20 },
                { x: 90, y: -90, size: 20 }
            ];
            
            elements.forEach((element, index) => {
                const pos = positions[index];
                const x = centerX + pos.x;
                const y = centerY + pos.y;
                
                ctx.fillStyle = `hsla(60, 100%, 70%, ${0.6 + Math.sin(time * 1.5 + index) * 0.4})`;
                ctx.font = `${pos.size}px Arial`;
                ctx.textAlign = 'center';
                ctx.fillText(element, x, y);
            });
        }

        // ì¼ë ‰íŠ¸ë¡œë‹‰ ìš”ì†Œ (ì¼ë ‰íŠ¸ë¡œë‹‰)
        function drawElectronicElements(ctx, centerX, centerY, time, mouseX, mouseY, isHovering) {
            const lines = 8;
            for (let i = 0; i < lines; i++) {
                const angle = (i / lines) * Math.PI * 2;
                const startX = centerX + Math.cos(angle) * 60;
                const startY = centerY + Math.sin(angle) * 60;
                const endX = centerX + Math.cos(angle) * (100 + Math.sin(time * 3 + i) * 30);
                const endY = centerY + Math.sin(angle) * (100 + Math.sin(time * 3 + i) * 30);
                
                const alpha = 0.3 + Math.sin(time * 2 + i) * 0.7;
                ctx.strokeStyle = `rgba(147, 51, 234, ${alpha})`;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.stroke();
            }
        }

        // íŒŒí‹°í´ ì‹œìŠ¤í…œ
        function drawParticles(ctx, centerX, centerY, time, characterType, mouseX, mouseY, isHovering) {
            const particleCount = 30;
            const baseSpeed = characterType.tempo === 'fast' ? 2 : 1;
            
            for (let i = 0; i < particleCount; i++) {
                const angle = (i / particleCount) * Math.PI * 2 + time * baseSpeed;
                const distance = 150 + Math.sin(time * 2 + i) * 50;
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance;
                
                const size = 1 + Math.sin(time * 3 + i) * 2;
                const alpha = 0.3 + Math.sin(time * 1.5 + i) * 0.7;
                
                ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // ìºë¦­í„° ë‹¤ìš´ë¡œë“œ
        function downloadCharacter() {
            const canvas = document.getElementById('characterCanvas');
            const link = document.createElement('a');
            link.download = 'my-music-character.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // SNS ê³µìœ 
        function shareCharacter() {
            if (navigator.share) {
                navigator.share({
                    title: 'ë‚˜ë§Œì˜ ì¸ìƒìŒì•… ìºë¦­í„°',
                    text: 'ìŒì•…ì·¨í–¥ ì„¤ë¬¸ìœ¼ë¡œ ë§Œë“  ë‚˜ë§Œì˜ ìŒì•… ìºë¦­í„°ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!',
                    url: window.location.href
                });
            } else {
                // ê³µìœ  APIê°€ ì§€ì›ë˜ì§€ ì•ŠëŠ” ê²½ìš°
                alert('ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ê³µìœ  ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        // ì„¤ë¬¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        function goBackToSurvey() {
            document.getElementById('birthPage').classList.add('hidden');
            document.getElementById('musicSurveyForm').reset();
            window.scrollTo(0, 0);
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeResultModal() {
            document.getElementById('resultModal').classList.add('hidden');
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('resultModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeResultModal();
            }
        });
    </script>
</body>
</html> 